# MQTT система

## Полная/домашняя часть

[Ссылка на видео. Первая часть](https://drive.google.com/file/d/1Af54MqqJVpQmV137njmJ6RglaeXwV5gS/view?usp=sharing)

[Ссылка на видео. Вторая часть](https://drive.google.com/file/d/1rDYknSP1mj9JAGF1asK_sLWmsRZdDJTY/view?usp=sharing)

## Аудиторная часть

[Ссылка на видео](https://drive.google.com/file/d/18-0DBtAGisYcRXq0aG7wFdwIRxMs-s7G/view?usp=drive_link)

## Детали реализации

Контроль за системой осуществляется с помощью скрипта [контролера](controller.py). При его запуске консоль ожидает ввода команд в формате `<target> <mode>`, где `target` - это один из клиентов или они оба, а `<mode>` - это целевой топик, на который нужно переключиться клиенту/клиентам.

### target

| target | значение                              |
|--------|---------------------------------------|
| photo  | скрипт [publusher.py](publusher.py)   |
| led    | скрипт [subscriber.py](subscriber.py) |
| all    | оба клиента                           |

### mode

| mode      | target | значение                                                | Время обновления |
|-----------|--------|---------------------------------------------------------|------------------|
| instant   | all    | моментальная передача значения                          | 1с               |
| average   | all    | передача среднего от очереди из последних 100 значений  | 2с               |
| stream    | all    | мгновенная передача значения через минимальную задержку | 0.5с             |
| threshold | led    | дополнительная подписка на min и max значения и вычисление порога загорания светодида как среднее между ними | зависит от основного топика |